# ============================================================
# refinex-auth 本地启动引导配置
# 仅负责连接 Nacos 并导入远程配置，不承载业务参数
# ============================================================

spring:
  application:
    # 服务名，对应 Nacos 服务注册名与服务配置 DataId 前缀
    name: refinex-auth

  config:
    import:
      # 共享基础参数
      - optional:nacos:refinex-base.yml?group=${REFINEX_NACOS_SHARED_GROUP:REFINEX_SHARED}&refreshEnabled=true
      # 缓存与 Redis 配置
      - optional:nacos:refinex-cache.yml?group=${REFINEX_NACOS_SHARED_GROUP:REFINEX_SHARED}&refreshEnabled=true
      # 数据源配置
      - optional:nacos:refinex-datasource.yml?group=${REFINEX_NACOS_SHARED_GROUP:REFINEX_SHARED}&refreshEnabled=true
      # 当前服务专属配置（refinex-auth.yml）
      - optional:nacos:${spring.application.name}.yml?group=${REFINEX_NACOS_SERVICE_GROUP:REFINEX_SERVICE}&refreshEnabled=true

  cloud:
    nacos:
      # Nacos 地址
      server-addr: ${REFINEX_NACOS_SERVER_ADDR:}
      # Nacos 用户名
      username: ${REFINEX_NACOS_USERNAME:}
      # Nacos 密码
      password: ${REFINEX_NACOS_PASSWORD:}
      discovery:
        # 服务发现命名空间
        namespace: ${REFINEX_NACOS_NAMESPACE:public}
        # 服务发现分组
        group: ${REFINEX_NACOS_DISCOVERY_GROUP:REFINEX_DISCOVERY}
        # 是否注册本服务到 Nacos
        register-enabled: true
      config:
        # 配置中心命名空间
        namespace: ${REFINEX_NACOS_NAMESPACE:public}
        # 配置中心分组（服务级）
        group: ${REFINEX_NACOS_SERVICE_GROUP:REFINEX_SERVICE}
        # 配置文件后缀（DataId 统一使用 .yml）
        file-extension: yml
        # 是否允许动态刷新
        refresh-enabled: true
