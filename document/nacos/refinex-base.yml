# ============================================================
# Refinex 共享基础配置
# 发布到 Nacos: Group=REFINEX_SHARED
# 用途：定义跨服务的基础参数（数据库/缓存/中间件/第三方）
# ============================================================

refinex:
  nacos:
    # Nacos 命名空间（按环境隔离：dev/test/prod）
    namespace: ${REFINEX_NACOS_NAMESPACE:public}
    # 共享配置组：放公共 DataId（refinex-base/refinex-cache/...）
    shared-group: ${REFINEX_NACOS_SHARED_GROUP:REFINEX_SHARED}
    # 服务配置组：放服务专属 DataId（refinex-auth/refinex-user/refinex-gateway）
    service-group: ${REFINEX_NACOS_SERVICE_GROUP:REFINEX_SERVICE}
    # 服务发现组：Nacos 注册与发现分组
    discovery-group: ${REFINEX_NACOS_DISCOVERY_GROUP:REFINEX_DISCOVERY}

  mysql:
    # MySQL JDBC 地址
    url: ${REFINEX_MYSQL_URL:jdbc:mysql://127.0.0.1:3306/refinex_platform?useUnicode=true&characterEncoding=utf-8&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}
    # MySQL 用户名
    username: ${REFINEX_MYSQL_USERNAME:root}
    # MySQL 密码
    password: ${REFINEX_MYSQL_PASSWORD:123456}

  redis:
    # Redis 主机地址
    url: ${REFINEX_REDIS_HOST:127.0.0.1}
    # Redis 端口
    port: ${REFINEX_REDIS_PORT:6379}
    # Redis 密码（无密码可留空）
    password: ${REFINEX_REDIS_PASSWORD:}

  elasticsearch:
    # 是否启用 ES 能力
    enabled: ${REFINEX_ES_ENABLED:false}
    # 历史兼容字段（与 enabled 同值）
    enable: ${refinex.elasticsearch.enabled}
    # ES 地址（host:port，多个逗号分隔）
    url: ${REFINEX_ES_URL:127.0.0.1:9200}
    # ES 用户名
    username: ${REFINEX_ES_USERNAME:}
    # ES 密码
    password: ${REFINEX_ES_PASSWORD:}
    # ES 索引前缀
    index-prefix: ${REFINEX_ES_INDEX_PREFIX:refinex-}

  xxl-job:
    # XXL-Job 调度中心地址
    admin-addresses: ${REFINEX_XXL_ADMIN_ADDRESSES:http://127.0.0.1:8080/xxl-job-admin}
    # 执行器名称（默认使用 spring.application.name）
    app-name: ${REFINEX_XXL_APP_NAME:${spring.application.name}}
    # 调度鉴权 Token
    access-token: ${REFINEX_XXL_ACCESS_TOKEN:default_token}

  sentinel:
    # Sentinel Dashboard 地址
    dashboard: ${REFINEX_SENTINEL_DASHBOARD:127.0.0.1:8080}

  stream:
    # 是否启用消息流相关能力
    enabled: ${REFINEX_STREAM_ENABLED:false}
    # RocketMQ NameServer 地址
    name-server: ${REFINEX_STREAM_NAME_SERVER:127.0.0.1:9876}

  rocketmq:
    # 历史兼容字段：映射到 refinex.stream.name-server
    name-server: ${refinex.stream.name-server}

  seata:
    nacos:
      # Seata 配置中心 DataId
      data-id: ${REFINEX_SEATA_DATA_ID:seataServer.properties}
      # Seata 配置分组
      group: ${REFINEX_SEATA_GROUP:SEATA_GROUP}
      # Seata 命名空间（默认跟随 refinex.nacos.namespace）
      namespace: ${REFINEX_SEATA_NAMESPACE:${refinex.nacos.namespace}}

  file:
    oss:
      # 是否启用 OSS 文件服务
      enable: ${REFINEX_OSS_ENABLED:false}
      # OSS Endpoint
      endpoint: ${REFINEX_OSS_ENDPOINT:https://oss-cn-hangzhou.aliyuncs.com}
      # OSS Bucket
      bucket: ${REFINEX_OSS_BUCKET:refinex}
      # OSS AccessKey
      access-key: ${REFINEX_OSS_ACCESS_KEY:}
      # OSS SecretKey
      access-secret: ${REFINEX_OSS_ACCESS_SECRET:}
      # OSS 访问域名（CDN 域名，可选）
      domain: ${REFINEX_OSS_DOMAIN:}

  sms:
    # 是否启用真实短信（false 时走 MockSmsService）
    enabled: ${REFINEX_SMS_ENABLED:false}
    # 短信服务主机地址
    host: ${REFINEX_SMS_HOST:https://gyytz.market.alicloudapi.com}
    # 短信服务路径
    path: ${REFINEX_SMS_PATH:/sms/smsSend}
    # 短信 AppCode
    appcode: ${REFINEX_SMS_APPCODE:}
    # 短信签名 ID
    sms-sign-id: ${REFINEX_SMS_SIGN_ID:}
    # 短信模板 ID
    template-id: ${REFINEX_SMS_TEMPLATE_ID:}
